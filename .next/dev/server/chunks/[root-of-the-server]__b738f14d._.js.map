{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jarvis/OneDrive/%C3%81rea%20de%20Trabalho/recent%20front/frontend-ii/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createSupabaseServerClient } from \"@supabase/ssr\"\r\nimport { cookies } from \"next/headers\"\r\n\r\n// API routes não precisam de storageKey pois cada request HTTP é isolada\r\nexport async function createServerClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createSupabaseServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\r\n    cookies: {\r\n      getAll() {\r\n        return cookieStore.getAll()\r\n      },\r\n      setAll(cookiesToSet) {\r\n        try {\r\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\r\n        } catch {\r\n          // The `setAll` method was called from a Server Component.\r\n          // This can be ignored if you have middleware refreshing\r\n          // user sessions.\r\n        }\r\n      },\r\n    },\r\n  })\r\n}\r\n\r\nexport { createServerClient as createClient }\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAA0B,sUAAoF;QACnH,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jarvis/OneDrive/%C3%81rea%20de%20Trabalho/recent%20front/frontend-ii/app/api/whatsapp/quick-replies/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { cookies } from \"next/headers\"\r\n\r\nexport async function GET() {\r\n  try {\r\n    const supabase = await createClient()\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"quick_replies\")\r\n      .select(\r\n        `\r\n        *,\r\n        category:quick_reply_categories(id, name)\r\n      `,\r\n      )\r\n      .eq(\"is_active\", true)\r\n      .order(\"created_at\", { ascending: false })\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao buscar respostas rápidas:\", error)\r\n      return NextResponse.json({ success: false, message: \"Erro ao buscar respostas rápidas\" }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json({ success: true, replies: data || [] })\r\n  } catch (error) {\r\n    console.error(\"Erro ao buscar respostas rápidas:\", error)\r\n    return NextResponse.json({ success: false, message: \"Erro interno do servidor\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n    const body = await request.json()\r\n    const cookieStore = await cookies()\r\n    const userId = cookieStore.get(\"auth_user_id\")?.value\r\n\r\n    const { title, message, category_id } = body\r\n\r\n    if (!title || !message || !category_id) {\r\n      return NextResponse.json({ success: false, message: \"Campos obrigatórios faltando\" }, { status: 400 })\r\n    }\r\n\r\n    let createdByName = \"Sistema\"\r\n    if (userId) {\r\n      const { data: userData } = await supabase.from(\"perfis\").select(\"nome\").eq(\"id\", userId).single()\r\n      if (userData) {\r\n        createdByName = userData.nome\r\n      }\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"quick_replies\")\r\n      .insert({\r\n        title,\r\n        message,\r\n        category_id,\r\n        created_by_id: userId || null,\r\n        created_by_name: createdByName,\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao criar resposta rápida:\", error)\r\n      return NextResponse.json({ success: false, message: \"Erro ao criar resposta rápida\" }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json({ success: true, reply: data })\r\n  } catch (error) {\r\n    console.error(\"Erro ao criar resposta rápida:\", error)\r\n    return NextResponse.json({ success: false, message: \"Erro interno do servidor\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function PUT(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n    const body = await request.json()\r\n\r\n    const { id, title, message, category_id } = body\r\n\r\n    if (!id || !title || !message || !category_id) {\r\n      return NextResponse.json({ success: false, message: \"Campos obrigatórios faltando\" }, { status: 400 })\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"quick_replies\")\r\n      .update({\r\n        title,\r\n        message,\r\n        category_id,\r\n        updated_at: new Date().toISOString(),\r\n      })\r\n      .eq(\"id\", id)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao atualizar resposta rápida:\", error)\r\n      return NextResponse.json({ success: false, message: \"Erro ao atualizar resposta rápida\" }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json({ success: true, reply: data })\r\n  } catch (error) {\r\n    console.error(\"Erro ao atualizar resposta rápida:\", error)\r\n    return NextResponse.json({ success: false, message: \"Erro interno do servidor\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function DELETE(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n    const { searchParams } = new URL(request.url)\r\n    const id = searchParams.get(\"id\")\r\n\r\n    if (!id) {\r\n      return NextResponse.json({ success: false, message: \"ID é obrigatório\" }, { status: 400 })\r\n    }\r\n\r\n    const { error } = await supabase.from(\"quick_replies\").delete().eq(\"id\", id)\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao deletar resposta rápida:\", error)\r\n      return NextResponse.json({ success: false, message: \"Erro ao deletar resposta rápida\" }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json({ success: true })\r\n  } catch (error) {\r\n    console.error(\"Erro ao deletar resposta rápida:\", error)\r\n    return NextResponse.json({ success: false, message: \"Erro interno do servidor\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}